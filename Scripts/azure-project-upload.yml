 parameters:
  name: ''

 steps: 
  - task: DownloadPipelineArtifact@0
    inputs:
      artifactName: 'WEB_${{parameters.name}}_NANOVG'
      targetPath: 'webgl/${{parameters.name}}'

  - task: DownloadPipelineArtifact@0
    inputs:
      artifactName: 'WEB_${{parameters.name}}_CANVAS'
      targetPath: 'canvas/${{parameters.name}}'

  - task: DownloadPipelineArtifact@0
    inputs:
      artifactName: 'MAC_${{parameters.name}}_NANOVG'
      targetPath: '$(Build.ArtifactStagingDirectory)'

  - task: DownloadPipelineArtifact@0
    inputs:
      artifactName: 'WIN_${{parameters.name}}_NANOVG'
      targetPath: '$(Build.ArtifactStagingDirectory)'

  - bash: |
      ls -la $BUILD_ARTIFACTSTAGINGDIRECTORY
      sed -i.bak 's,var origin = "/";,var origin = "https://iplug2.github.io/webgl/${{parameters.name}}/";,g' ./webgl/${{parameters.name}}/scripts/${{parameters.name}}-awn.js
      sed -i.bak 's,var origin = "/";,var origin = "https://iplug2.github.io/canvas/${{parameters.name}}/";,g' ./canvas/${{parameters.name}}/scripts/${{parameters.name}}-awn.js
      rm  ./webgl/${{parameters.name}}/scripts/*.bak
      rm  ./canvas/${{parameters.name}}/scripts/*.bak
    displayName: Set origins
